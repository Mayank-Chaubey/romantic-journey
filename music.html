<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Romantic Music</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Great+Vibes&family=Nunito:wght@300;400;700&display=swap');
    *, *::before, *::after { box-sizing: border-box; }

    body {
      width: 100%; min-height: 100vh; font-family: 'Nunito', serif;
      background: linear-gradient(135deg, #fff5f8 0%, #ffe0ec 50%, #fff8fc 100%);
      display: flex; align-items: center; justify-content: center;
      padding: 60px 40px; color: #332c2f; -webkit-font-smoothing: antialiased;
      position: relative; overflow-x: hidden;
      animation: gradient-flow 20s ease-in-out infinite;
    }

    @keyframes gradient-flow {
      0%, 100% { background: linear-gradient(135deg, #fff5f8 0%, #ffe0ec 50%, #fff8fc 100%); }
      50% { background: linear-gradient(135deg, #ffe8f0 0%, #ffc0dd 50%, #fff5f8 100%); }
    }

    .musical-notes {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      pointer-events: none; z-index: 0;
    }

    .note {
      position: absolute; font-size: 24px;
      animation: float-note 8s ease-in infinite;
      opacity: 0.3;
    }

    @keyframes float-note {
      0% { transform: translateY(100vh) translateX(0) scale(0.8) rotate(0deg); opacity: 0; }
      10% { opacity: 0.5; }
      50% { transform: translateY(50vh) translateX(100px) scale(1) rotate(180deg); opacity: 0.8; }
      90% { opacity: 0.5; }
      100% { transform: translateY(-100vh) translateX(200px) scale(0.8) rotate(360deg); opacity: 0; }
    }

    .container {
      width: 100%; max-width: 700px; position: relative; z-index: 1;
      animation: fade-in 0.8s ease-out;
    }

    @keyframes fade-in {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }

    h1 {
      font-family: 'Playfair Display', serif; font-size: 52px; color: #d33b6a;
      text-align: center; margin-bottom: 20px; text-shadow: 0 4px 12px rgba(210,60,110,0.1);
    }

    .subtitle {
      text-align: center; font-size: 18px; color: #8b5b6b;
      margin-bottom: 50px; font-style: italic;
    }

    .music-player {
      background: linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,250,250,0.93));
      border-radius: 25px; padding: 50px 40px;
      box-shadow: 0 25px 80px rgba(80,40,60,0.12);
      border: 1px solid rgba(255,200,220,0.3);
      text-align: center;
    }

    .player-emoji {
      font-size: 80px; margin-bottom: 20px;
      animation: pulse-emoji 2s ease-in-out infinite;
    }

    @keyframes pulse-emoji {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.15); }
    }

    .player-label {
      font-size: 20px; color: #5b3a45;
      margin-bottom: 25px; font-weight: 600;
    }

    .player-controls {
      display: flex; gap: 15px; justify-content: center;
      margin-bottom: 30px;
    }

    .control-btn {
      padding: 14px 28px; border: none;
      background: linear-gradient(90deg, #ffd1e8, #ffdff6);
      color: #5b2b42; font-weight: 700; font-size: 16px;
      border-radius: 999px; cursor: pointer;
      transition: all 0.3s; box-shadow: 0 8px 20px rgba(255,107,157,0.15);
    }

    .control-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 40px rgba(255,107,157,0.3);
    }

    .control-btn.active {
      background: linear-gradient(90deg, #ff6b9d, #ff9ab3);
      color: white;
    }

    .volume-control {
      display: flex; align-items: center; gap: 15px;
      justify-content: center; margin-bottom: 20px;
    }

    .volume-control label {
      font-size: 14px; color: #6b4b55; font-weight: 600;
    }

    .volume-control input[type="range"] {
      width: 150px; accent-color: #ff6b9d;
      cursor: pointer;
    }

    .playlist {
      margin-top: 40px; padding-top: 30px;
      border-top: 1px solid rgba(255,107,157,0.2);
    }

    .playlist-title {
      font-size: 16px; font-weight: 600; color: #d33b6a;
      margin-bottom: 20px;
    }

    .song-item {
      padding: 12px 16px; margin: 8px 0;
      background: rgba(255,200,220,0.08);
      border-left: 3px solid #ff6b9d;
      border-radius: 8px; cursor: pointer;
      transition: all 0.3s; color: #5b3a45;
      display: flex; align-items: center; justify-content: space-between;
    }

    .song-item:hover {
      background: rgba(255,200,220,0.15);
      transform: translateX(5px);
    }

    .song-item.playing {
      background: linear-gradient(90deg, rgba(255,107,157,0.15), rgba(255,107,157,0.05));
      border-left-color: #ff4d7a; font-weight: 600;
    }

    .yt-btn {
      display: inline-flex; align-items: center; gap: 8px;
      padding: 6px 10px; margin-left: 12px;
      background: #ff3333; color: white; border-radius: 8px; font-size: 12px;
      text-decoration: none; font-weight: 700; box-shadow: 0 6px 18px rgba(255,50,80,0.12);
      border: none; cursor: pointer;
    }

    .yt-btn:hover { transform: translateY(-2px); }

    .song-title { flex: 1 1 auto; text-align: left; padding-right: 12px; }

    /* YouTube modal */
    .yt-modal {
      position: fixed; inset: 0; background: rgba(10,10,12,0.65);
      display: none; align-items: center; justify-content: center; z-index: 6000;
    }
    .yt-modal.open { display: flex; }
    .yt-modal .inner {
      width: 90%; max-width: 900px; background: #000; border-radius: 12px; overflow: hidden;
      box-shadow: 0 30px 100px rgba(0,0,0,0.6);
    }
    .yt-modal .close-btn {
      position: absolute; top: 18px; right: 22px; background: rgba(255,255,255,0.08);
      color: white; border: none; padding: 8px 12px; border-radius: 8px; cursor: pointer;
      font-weight: 700; z-index: 6100;
    }
    .yt-frame { width: 100%; height: 56vw; max-height: 560px; border: none; display: block; }

    .nav-buttons {
      display: flex; justify-content: space-between;
      margin-top: 50px; gap: 20px;
    }

    .nav-btn {
      padding: 12px 24px; border-radius: 999px;
      background: linear-gradient(90deg, #ffd1e8, #ffdff6);
      color: #5b2b42; font-weight: 600;
      border: none; cursor: pointer; transition: all 0.3s;
      text-decoration: none; display: inline-flex; align-items: center; gap: 8px;
    }

    .nav-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 30px rgba(255,107,157,0.3);
    }

    .page-dots {
      position: fixed; bottom: 30px; left: 50%;
      transform: translateX(-50%); display: flex; gap: 10px; z-index: 5000;
    }

    .dot {
      width: 12px; height: 12px; border-radius: 50%;
      background: rgba(255,107,157,0.4); cursor: pointer;
      transition: all 0.3s; border: 2px solid transparent;
    }

    .dot.active {
      background: #ff6b9d; transform: scale(1.3);
      box-shadow: 0 0 10px rgba(255,107,157,0.6);
    }

    .dot:hover { background: rgba(255,107,157,0.8); }

    @media (max-width: 768px) {
      h1 { font-size: 36px; }
      .music-player { padding: 30px 20px; }
      .player-emoji { font-size: 60px; }
      .player-controls { flex-wrap: wrap; }
    }
  </style>
</head>
<body>
  <div class="musical-notes" id="notes-container"></div>

  <audio id="audioPlayer" style="display: none;">
    <source src="" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>

  <div class="container">
    <h1>üéµ Our Playlist üéµ</h1>
    <div class="subtitle">Music for the moments that matter</div>

    <div class="music-player">
      <div class="player-emoji">üéº</div>
      <div class="player-label">Now Playing: Romantic Journey</div>

      <div class="player-controls">
        <button class="control-btn" id="playBtn">‚ñ∂ Play</button>
        <button class="control-btn" id="pauseBtn">‚è∏ Pause</button>
        <button class="control-btn" id="stopBtn">‚èπ Stop</button>
      </div>

      <div class="volume-control">
        <label for="volumeSlider">Volume:</label>
        <input type="range" id="volumeSlider" min="0" max="100" value="50">
      </div>

      <div class="playlist">
        <div class="playlist-title">üé∂ Suggested Songs</div>
        <div class="song-item playing">üíï A Thousand Years ‚Äî Christina Perri</div>
        <div class="song-item">üåπ Love Story ‚Äî Taylor Swift</div>
        <div class="song-item">üí´ Thinking Out Loud ‚Äî Ed Sheeran</div>
        <div class="song-item">‚ú® Enchanted ‚Äî Taylor Swift</div>
        <div class="song-item">üéº All Too Well ‚Äî Taylor Swift</div>
        <div class="song-item">üåô Lover ‚Äî Taylor Swift</div>
        <div class="song-item">üíñ Invisible String ‚Äî Taylor Swift</div>
        <div class="song-item">üéµ Begin Again ‚Äî Taylor Swift</div>
        <div class="song-item">‚ú® The Best Day of My Life ‚Äî American Authors</div>
        <div class="song-item">üåπ Perfect ‚Äî Ed Sheeran</div>
      </div>
    </div>

    <div class="nav-buttons">
      <a href="quotes.html" class="nav-btn">‚Üê Quotes</a>
      <a href="closing.html" class="nav-btn">Forever ‚Üí</a>
    </div>
  </div>

  <div class="page-dots" id="pageDots"></div>

  <!-- YouTube embed modal -->
  <div id="ytModal" class="yt-modal" aria-hidden="true">
    <div class="inner">
      <button id="ytClose" class="close-btn">Close ‚úï</button>
      <iframe id="ytFrame" class="yt-frame" src="" allow="autoplay; encrypted-media" allowfullscreen></iframe>
    </div>
  </div>

  <script>
    function createFloatingNotes() {
      const container = document.getElementById('notes-container');
      const notes = ['‚ô´', '‚ô¨', '‚ô™', 'üéµ', 'üé∂'];
      for (let i = 0; i < 12; i++) {
        const note = document.createElement('div');
        note.className = 'note';
        note.textContent = notes[Math.floor(Math.random() * notes.length)];
        note.style.left = Math.random() * 100 + '%';
        note.style.bottom = '-50px';
        note.style.animationDelay = Math.random() * 5 + 's';
        note.style.animationDuration = (8 + Math.random() * 6) + 's';
        container.appendChild(note);
      }
    }

    createFloatingNotes();

    // Audio player setup
    const audioPlayer = document.getElementById('audioPlayer');
    const songMapping = {
      'A Thousand Years': 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3',
      'Love Story': 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3',
      'Thinking Out Loud': 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3',
      'Enchanted': 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3',
      'All Too Well': 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3',
      'Lover': 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-6.mp3',
      'Invisible String': 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-7.mp3',
      'Begin Again': 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-8.mp3',
      'The Best Day of My Life': 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-9.mp3',
      'Perfect': 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-10.mp3'
    };

    // Player functionality
    let isPlaying = false;
    const playBtn = document.getElementById('playBtn');
    const pauseBtn = document.getElementById('pauseBtn');
    const stopBtn = document.getElementById('stopBtn');
    const volumeSlider = document.getElementById('volumeSlider');
    const songItems = document.querySelectorAll('.song-item');
    let currentSong = 'A Thousand Years';

    // Add YouTube quick-link buttons to each song item (open embedded YouTube modal)
    function openYouTubeEmbed(query) {
      const modal = document.getElementById('ytModal');
      const frame = document.getElementById('ytFrame');
      // Use YouTube embed search playlist so users can pick official video
      frame.src = 'https://www.youtube.com/embed?listType=search&list=' + encodeURIComponent(query) + '&autoplay=1&rel=0';
      modal.classList.add('open');
      modal.setAttribute('aria-hidden', 'false');
    }

    function closeYouTubeEmbed() {
      const modal = document.getElementById('ytModal');
      const frame = document.getElementById('ytFrame');
      frame.src = '';
      modal.classList.remove('open');
      modal.setAttribute('aria-hidden', 'true');
    }

    document.getElementById('ytClose').addEventListener('click', closeYouTubeEmbed);
    document.getElementById('ytModal').addEventListener('click', (e) => { if (e.target.id === 'ytModal') closeYouTubeEmbed(); });

    songItems.forEach(item => {
      const rawText = item.firstChild && item.firstChild.nodeValue ? item.firstChild.nodeValue.trim() : item.textContent.trim();
      const title = rawText.replace(/\s*YouTube\s*$/i, '').trim();
      const ytBtn = document.createElement('button');
      ytBtn.className = 'yt-btn';
      ytBtn.type = 'button';
      ytBtn.textContent = 'YouTube';
      ytBtn.addEventListener('click', (ev) => { ev.stopPropagation(); openYouTubeEmbed(title); });
      item.appendChild(ytBtn);
    });

    playBtn?.addEventListener('click', () => {
      const songTitle = currentSong.split(' ‚Äî ')[0].trim();
      const audioUrl = songMapping[songTitle] || Object.values(songMapping)[0];
      audioPlayer.src = audioUrl;
      audioPlayer.play();
      isPlaying = true;
      playBtn.classList.add('active');
      pauseBtn.classList.remove('active');
      stopBtn.classList.remove('active');
    });

    pauseBtn?.addEventListener('click', () => {
      audioPlayer.pause();
      isPlaying = false;
      playBtn.classList.remove('active');
      pauseBtn.classList.add('active');
      stopBtn.classList.remove('active');
    });

    stopBtn?.addEventListener('click', () => {
      audioPlayer.pause();
      audioPlayer.currentTime = 0;
      isPlaying = false;
      playBtn.classList.remove('active');
      pauseBtn.classList.remove('active');
      stopBtn.classList.add('active');
    });

    volumeSlider?.addEventListener('input', (e) => {
      audioPlayer.volume = e.target.value / 100;
      console.log('Volume: ' + e.target.value + '%');
    });

    // Arrange each song item with a title span and keep click-to-play behavior
    songItems.forEach((item) => {
      const text = item.textContent.trim();
      // Extract title (remove emoji at start if present)
      const titleMatch = text.match(/^[^\w]*([\w\s'\-,:.()]+ ‚Äî [^\n]+)|^[^\w]*([\w\s'\-,:.()]+)$/);
      const titleText = titleMatch ? (titleMatch[1] || titleMatch[2] || text) : text;

      item.innerHTML = '';
      const span = document.createElement('span');
      span.className = 'song-title';
      span.textContent = titleText.trim();
      item.appendChild(span);

      // keep click-to-play on the row
      item.addEventListener('click', (ev) => {
        // ignore clicks on the yt button (they have their own handler)
        if (ev.target.closest('.yt-btn')) return;
        currentSong = span.textContent;
        songItems.forEach(s => s.classList.remove('playing'));
        item.classList.add('playing');

        const songTitle = currentSong.split(' ‚Äî ')[0].trim();
        const audioUrl = songMapping[songTitle] || Object.values(songMapping)[0];
        audioPlayer.src = audioUrl;
        audioPlayer.play();
        playBtn.classList.add('active');
        pauseBtn.classList.remove('active');
        stopBtn.classList.remove('active');
      });
    });

    // Page dots navigation
    const pages = [
      { title: 'Letter', url: 'index.html' },
      { title: 'Gallery', url: 'gallery.html' },
      { title: 'Quotes', url: 'quotes.html' },
      { title: 'Music', url: 'music.html' },
      { title: 'Forever', url: 'closing.html' }
    ];

    function getCurrentPageIndex() {
      const currentFile = window.location.pathname.split('/').pop() || 'music.html';
      return pages.findIndex(p => p.url === currentFile);
    }

    function initializePageDots() {
      const dotsContainer = document.getElementById('pageDots');
      if (!dotsContainer) return;
      dotsContainer.innerHTML = '';
      const currentIndex = getCurrentPageIndex();
      pages.forEach((page, index) => {
        const dot = document.createElement('div');
        dot.className = 'dot' + (index === currentIndex ? ' active' : '');
        dot.title = 'Go to ' + page.title;
        dot.addEventListener('click', () => { window.location.href = page.url; });
        dotsContainer.appendChild(dot);
      });
    }

    initializePageDots();
  </script>
</body>
</html>
